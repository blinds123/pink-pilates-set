<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Debug - Pink Pilates Set</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .debug-container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .image-test { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .image-test h3 { margin: 0 0 10px 0; color: #333; }
        .status { padding: 5px 10px; border-radius: 4px; font-weight: bold; margin-left: 10px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .pending { background: #fff3cd; color: #856404; }
        img { max-width: 200px; height: auto; display: block; margin: 10px 0; border: 1px solid #ddd; }
        .path-info { font-family: monospace; background: #f8f9fa; padding: 10px; border-radius: 4px; margin: 5px 0; font-size: 12px; }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1>üîç Image Path Debug Report</h1>
        <p>Testing all product image paths used in the gallery...</p>

        <div id="results"></div>
    </div>

    <script>
        const productImages = [
            'product-01.jpeg',
            'product-02.jpeg',
            'product-03.jpeg',
            'product-04.jpeg',
            'product-05.jpeg'
        ];

        const pathVariations = [
            './images/product/',  // Relative path
            '/images/product/',   // Absolute path
            'images/product/',    // Relative without ./
        ];

        function testImage(path) {
            return new Promise((resolve) => {
                const img = new Image();
                const startTime = Date.now();

                img.onload = () => {
                    resolve({
                        path: path,
                        status: 'success',
                        loadTime: Date.now() - startTime,
                        naturalWidth: img.naturalWidth,
                        naturalHeight: img.naturalHeight
                    });
                };

                img.onerror = () => {
                    resolve({
                        path: path,
                        status: 'error',
                        loadTime: Date.now() - startTime,
                        error: 'Failed to load'
                    });
                };

                img.src = path;
            });
        }

        async function runTests() {
            const resultsContainer = document.getElementById('results');
            resultsContainer.innerHTML = '<p>Testing image paths...</p>';

            let allTests = [];

            // Test each image with each path variation
            for (const image of productImages) {
                for (const pathBase of pathVariations) {
                    const fullPath = pathBase + image;
                    allTests.push(testImage(fullPath));
                }
            }

            const results = await Promise.all(allTests);

            // Group results by image
            const groupedResults = {};
            results.forEach(result => {
                const imageName = result.path.split('/').pop();
                if (!groupedResults[imageName]) {
                    groupedResults[imageName] = [];
                }
                groupedResults[imageName].push(result);
            });

            // Display results
            let html = '';

            for (const [imageName, tests] of Object.entries(groupedResults)) {
                html += `
                    <div class="image-test">
                        <h3>${imageName}</h3>
                `;

                let hasWorkingPath = false;

                tests.forEach(test => {
                    const statusClass = test.status === 'success' ? 'success' : 'error';
                    const statusText = test.status === 'success' ? '‚úÖ LOADED' : '‚ùå FAILED';

                    if (test.status === 'success') {
                        hasWorkingPath = true;
                    }

                    html += `
                        <div class="path-info">
                            <strong>Path:</strong> ${test.path}
                            <span class="status ${statusClass}">${statusText}</span>
                            ${test.status === 'success' ?
                                `<br><strong>Size:</strong> ${test.naturalWidth}x${test.naturalHeight}px | <strong>Load time:</strong> ${test.loadTime}ms` :
                                `<br><strong>Error:</strong> ${test.error}`
                            }
                        </div>
                    `;

                    if (test.status === 'success') {
                        html += `<img src="${test.path}" alt="${imageName}">`;
                    }
                });

                if (!hasWorkingPath) {
                    html += `<div style="color: red; font-weight: bold;">‚ö†Ô∏è No working paths found for this image!</div>`;
                }

                html += '</div>';
            }

            // Summary
            const successCount = results.filter(r => r.status === 'success').length;
            const totalCount = results.length;

            html += `
                <div style="background: #e7f3ff; padding: 20px; border-radius: 8px; margin-top: 20px;">
                    <h2>üìä Summary</h2>
                    <p><strong>Total tests:</strong> ${totalCount}</p>
                    <p><strong>Successful loads:</strong> ${successCount}</p>
                    <p><strong>Failed loads:</strong> ${totalCount - successCount}</p>
                    <p><strong>Success rate:</strong> ${((successCount / totalCount) * 100).toFixed(1)}%</p>
                </div>
            `;

            resultsContainer.innerHTML = html;
        }

        // Run tests when page loads
        runTests();
    </script>
</body>
</html>